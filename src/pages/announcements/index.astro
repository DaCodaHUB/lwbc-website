---
import BaseLayout from "../../layouts/BaseLayout.astro";
import data from "../../data/announcements.json";

const sections = data.announcements ?? [];
---

<BaseLayout title="Announcements / Thông báo">
  <h1>
    <span class="lang-vi">Thông báo</span>
    <span class="lang-en">Announcements</span>
  </h1>

  <p class="muted">
    <span class="lang-vi">Cập nhật cho Hội Thánh.</span>
    <span class="lang-en">Updates for the church family.</span>
  </p>

  <div class="grid" style="margin-top:14px">
    {sections.map((sec) => (
      <section class="card">
        <h2 style="margin-bottom:10px">
          <span class="lang-vi">{sec.heading_vi}</span>
          <span class="lang-en">{sec.heading_en}</span>
        </h2>

        {sec.items?.length ? (
          <ul style="margin:0; padding-left:18px">
            {sec.items.map((it) => (
              <li style="margin-bottom:12px">
                <div>
                  <strong>
                    <span class="lang-vi">{it.text_vi}</span>
                    <span class="lang-en">{it.text_en}</span>
                  </strong>
                </div>

                {(it.details_vi || it.details_en) ? (
                  <div class="muted" style="margin-top:2px">
                    <span class="lang-vi">{it.details_vi}</span>
                    <span class="lang-en">{it.details_en}</span>
                  </div>
                ) : null}

                {it.subitems?.length ? (
                  <ul style="margin-top:8px; padding-left:18px">
                    {it.subitems.map((sub) => (
                      <li style="margin-bottom:6px">
                        <span class="pill" style="margin-right:8px">
                          <span class="lang-vi">{sub.label_vi}</span>
                          <span class="lang-en">{sub.label_en}</span>
                        </span>
                        <span>
                          <span class="lang-vi">{sub.text_vi}</span>
                          <span class="lang-en">{sub.text_en}</span>
                        </span>
                      </li>
                    ))}
                  </ul>
                ) : null}

                {it.meta?.length ? (
                  <div class="table-wrap" style="margin-top:10px">
                    <table class="table">
                      <tbody>
                        {it.meta.map((m) => (
                          <tr>
                            <td style="width:220px">
                              <strong>
                                <span class="lang-vi">{m.label_vi}</span>
                                <span class="lang-en">{m.label_en}</span>
                              </strong>
                            </td>
                            <td>{m.value}</td>
                          </tr>
                        ))}
                      </tbody>
                    </table>
                  </div>
                ) : null}
              </li>
            ))}
          </ul>
        ) : (
          <p class="muted">—</p>
        )}
      </section>
    ))}
  </div>
</BaseLayout>
